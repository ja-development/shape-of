var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,n){l.raw=n;return l};$jscomp.arrayIteratorImpl=function(l){var n=0;return function(){return n<l.length?{done:!1,value:l[n++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.makeIterator=function(l){var n="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return n?n.call(l):$jscomp.arrayIterator(l)};
$jscomp.arrayFromIterator=function(l){for(var n,v=[];!(n=l.next()).done;)v.push(n.value);return v};$jscomp.arrayFromIterable=function(l){return l instanceof Array?l:$jscomp.arrayFromIterator($jscomp.makeIterator(l))};var shapeOf;
(function(){shapeOf=function(a){return q(this,a)};var l=function(a){if(Array.isArray(a)){for(var c=[],b=0;b<a.length;b++){var d=a[b];if(Array.isArray(d))for(var e=0;e<d.length;e++)c.push(d[e]);else c.push(d)}return c}return a},n=Number.isInteger||function(a){return"number"===typeof a&&a===a&&Infinity!==a&&-Infinity!==a&&Math.floor(a)===a},v=function(a,c){a=a.split(".");a.forEach(function(b,d){return a[d]=parseInt(b)});c=c.split(".");c.forEach(function(b,d){return c[d]=parseInt(b)});return a[0]>=c[0]&&
(a[1]>=c[1]||a[0]>c[0])&&(a[2]>=c[2]||a[1]>c[1])},q=function(a,c,b){b=b||{};var d={};b.baseObject&&(d=b.baseObject,delete b.baseObject);delete b.exclude;I(b);var e=b.exclude;-1===e.indexOf("shouldBe")&&(d.shouldBe=r.bind(a,Object.assign({},{obj:c},b)));-1===e.indexOf("shouldBeExactly")&&(d.shouldBeExactly=r.bind(a,Object.assign({},{obj:c,exact:!0},b)));-1===e.indexOf("returnsObject")&&(d.returnsObject=J(a,Object.assign({},{obj:c},b)));-1===e.indexOf("returnsResults")&&(d.returnsResults=K(a,Object.assign({},
{obj:c},b)));-1===e.indexOf("shouldNotBe")&&(d.shouldNotBe=function(f,k){return!r(f,k)}.bind(a,Object.assign({},{obj:c},b)));-1===e.indexOf("throwsOnInvalid")&&(d.throwsOnInvalid=A(a,c,b));-1===e.indexOf("onInvalid")&&(d.onInvalid=L.bind(a,a,Object.assign({},{obj:c},b)));-1===e.indexOf("onValid")&&(d.onValid=M.bind(a,a,Object.assign({},{obj:c},b)));-1===e.indexOf("onComplete")&&(d.onComplete=N.bind(a,a,Object.assign({},{obj:c},b)));return d},I=function(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-
1]=arguments[d];a.exclude=a.exclude||[];if(a.returnsObject||a.returnsResults)b=b.concat(["returnsObject"]),b=b.concat(["returnsResults"]);a.throwsOnInvalid&&(b=b.concat(["throwsOnInvalid"]));b.forEach(function(e){-1===a.exclude.indexOf(e)&&a.exclude.push(e)})},A=function(a,c,b){b=Object.assign({},{obj:c,throwsOnInvalid:!0},b);b.baseObject=O.bind(a,a,b);return q(a,c,b)},O=function(a,c,b){b&&(c.errorObj=b);return A(a,c.obj,c)},J=function(a,c){var b=Object.assign({},{obj:c.obj,returnsObject:!0},c);return q(a,
c.obj,b)},K=function(a,c){var b=Object.assign({},{obj:c.obj,returnsResults:!0},c);return q(a,c.obj,b)},L=function(a,c,b){var d=c.onInvalid||[];d.push(b);return q(a,c.obj,Object.assign({},{onInvalid:d},c))},M=function(a,c,b){var d=c.onValid||[];d.push(b);return q(a,c.obj,Object.assign({},{onValid:d},c))},N=function(a,c,b){var d=c.onComplete||[];d.push(b);return q(a,c.obj,Object.assign({},{onComplete:d},c))},r=function(a,c){var b=a.obj,d=a.returnsObject||!1,e=a.returnsResults||!1,f=!1,k=a.log||[];a=
Object.assign({},{log:k},a);if(shapeOf.isValidator(c)){var h=P(c,b);"undefined"===typeof h?m(a,"Failed: Validator '"+c._name+"'",b):b!==h&&m(a,"Mutation: Validator '"+c._name+"'",b,h)}else if("function"===typeof c)h=c(b),"undefined"===typeof h?m(a,"Failed: Validation using functional validator '"+c.name+"'",b):b!==h&&m(a,"Mutation: Functional validator '"+c.name+"'",b,h);else if(Array.isArray(c)){f=c.length===b.length;for(var g=0;g<b.length&&f;g++){var p=r(Object.assign({},a,{obj:b[g],returnsObject:!0}),
c[g]);(f=f&&"undefined"!==typeof p)||m(a,"Failed: Array element at index "+g,b[g]);p!==b[g]&&f&&(m(a,"Mutation: Array element at index "+g,b[g],p),b[g]=p)}f?h=b:m(a,"Failed: Array",b)}else"object"===typeof c?(h=Q(b,c,a),"undefined"===typeof h&&m(a,"Failed: Object",b)):c===b?h=b:m(a,"Failed: Strict equality",b,h);f="undefined"!==typeof h;a.onInvalid&&!f&&a.onInvalid.forEach(function(t){return t(b,c)});a.onValid&&f&&a.onValid.forEach(function(t){return t(b,c)});if(a.throwsOnInvalid&&!f){if(a.errorObj)throw a.errorObj;
throw"Invalid shape detected";}a.onComplete&&a.onComplete.forEach(function(t){return t(b,c)});return d?h:e?{success:f,log:k,obj:b}:f},Q=function(a,c,b){if("object"===typeof a&&null!==a){var d=b.returnsObject||!1,e=b.exact||!1;b=Object.assign({},b,{returnsObject:!0});for(var f=Object.keys(c),k=f.length-1;0<=k;k--){var h=f[k],g=c[h];if("undefined"===typeof a[h])if(g._optional)continue;else{m(b,"Failed: Object with missing key '"+h+"'");return}var p=a[h];g=r(Object.assign({},b,{obj:p}),g);if("undefined"===
typeof g){m(b,"Failed: Object at key '"+h+"'",p);return}g!==a[h]&&(m(b,"Mutation: Object field '"+h+"'",a[h],g),a[h]=g)}if(e)for(c=Object.keys(a),e=c.length-1;0<=e;e--)if(-1===f.indexOf(c[e])){m(b,"Failed: Object with extraneous key '"+c[e]+"'");return}return d?a:!0}},m=function(a,c,b){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(a.returnsResults){e=a.log;var f={message:c};0<d.length&&(1===d.length&&(d=d[0]),f.obj=d);e.push(f)}},y=function(a){for(var c=[],b=0;b<arguments.length;++b)c[b-
0]=arguments[b];if(c.length<this._requiredArgsCount)throw"Validator '"+this._name+"' requires at least "+this._requiredArgsCount+" arguments";this._thisCall.args=c;c=Object.keys(this._subValidators);for(b=c.length-1;0<=b;b--){var d=c[b];this[d]=this._subValidators[d]}c=y.bind(this);b=Object.keys(this);for(d=b.length-1;0<=d;d--){var e=b[d];c[e]=this[e]}return c};shapeOf.Validator=function(a,c,b){b=b||{};a=R(a,c,b);var d=y.bind(a);d=Object.assign(d,a);b.parent&&S(b.parent,d);a._aliases.forEach(function(e){shapeOf.Validator._validators[e]=
d});return shapeOf.Validator._validators[a._name]=d};shapeOf.Validator._validators={};var B={validator:"token"};shapeOf.isValidator=function(a){return!!(a&&a._validatorToken&&a._validatorToken===B&&a._callback&&"function"===typeof a._callback&&a._callChain&&a._thisCall)};var R=function(a,c,b,d){d=d||{};b=b||{};b=Object.assign({},d,b);d={};d._name=a;d._thisCall={name:a,args:[],_callback:c};d._callChain=[d._thisCall];d._options=b;d._optional=b.optional||!1;d._requiredArgsCount=b.requiredArgsCount||
Math.max(0,c.length-1);d._callback=c;d._aliases=b.aliases||[];d._subValidators={};d._validatorToken=B;b.serialize&&(d._serialize=b.serialize);b.deserialize&&(d._deserialize=b.deserialize);"string"===typeof d._aliases&&(d._aliases=[d._aliases]);return d},S=function(a,c){if("string"===typeof a&&(a=shapeOf.Validator._validators[a],!a))throw"Unknown validator: "+a;[c._name].concat(c._aliases).forEach(function(b){b=b.replace(a._name,"");b=b.split(".");b=b[b.length-1];for(var d={},e=Object.keys(c),f=e.length-
1;0<=f;f--){var k=e[f];d[k]=c[k]}a._optional&&(d._optional=!0);e=[].concat(a._callChain).concat(c._callChain);d._callChain=e;e=y.bind(d);e=Object.assign(e,d);a[b]=e;a._subValidators[b]=e})},P=function(a,c){for(var b=a._callChain,d=0;d<b.length;d++){var e=b[d];if(e.args.length<e._requiredArgsCount)throw"Missing required arguments for validator: "+e._name;var f=e.args.concat([c]);c=e._callback.apply(e,$jscomp.arrayFromIterable(f));if("undefined"===typeof c)break}return c};shapeOf.serialize=function(a,
c){var b={_shapeOfVersion:shapeOf.version,_shapeOfSchemaVersion:shapeOf.compatibleSchemaVersion,schema:w(a)};return c?b:JSON.stringify(b)};shapeOf.deserialize=function(a){if("string"===typeof a)try{a=JSON.parse(a)}catch(c){throw"Error while deserializing schema:\n"+c.toString();}if(!a._shapeOfVersion||!a._shapeOfSchemaVersion||!a.schema)throw"Object doesn't appear to be a valid shapeOf schema.";if(!v(shapeOf.compatibleSchemaVersion,a._shapeOfSchemaVersion))throw"Incompatible schema versions, current version == "+
shapeOf.compatibleSchemaVersion+", schema version == "+a._shapeOfSchemaVersion;return u(a.schema)};var T=function(a){if(!a.type||"validator"!==a.type)throw"Object isn't a validator type: "+a.toString();if(!a.callChain||!Array.isArray(a.callChain)||!a.name||"string"!==typeof a.name)throw"Malformed validator: "+a.toString();var c;a.callChain.forEach(function(b){if(!b.name||"string"!==typeof b.name||!b.args||!Array.isArray(b.args))throw"Malformed validator: "+a.toString();var d=shapeOf.Validator._validators[b.name];
if("undefined"===typeof d)throw"Validator not found: "+b.name;var e=b.name.split(".").pop();if(c&&!c[e])throw"Cannot find sub-validator "+b.name;if(0<b.args.length){var f=[];b.args.forEach(function(k){return f.push(u(k))});c=c?c[e].apply(c,$jscomp.arrayFromIterable(f)):d.apply(null,$jscomp.arrayFromIterable(f))}else c=c?c[e]:d});return c},u=function(a,c){if(!a.type||"string"!==typeof a.type)throw"Object isn't a valid type: "+a.toString();if("undefined"===typeof a.value&&"validator"!==a.type)throw"Object missing value: "+
a.toString();if("object"===a.type){if(!Array.isArray(a.value))throw"Type 'object' value must be an array";var b={};a.value.forEach(function(d){u(d,b)})}else if("field"===a.type){if(!a.name||"string"!==typeof a.name)throw"Illegal/missing field name for object "+c.toString();if(!c)throw"No parent present for 'field' type";c[a.name]=u(a.value)}else if("array"===a.type){if(!Array.isArray(a.value))throw"Type 'array' value must be array";b=[];a.value.forEach(function(d){b.push(u(d))})}else if("primitive"===
a.type)b=a.value;else if("validator"===a.type)b=T(a);else throw"Unknown object type: "+a.type;return b},w=function(a){var c={type:"primitive"};if(a.toJSON)c=a;else if(shapeOf.isValidator(a)){c={type:"validator",name:a._name};a._optional&&(c.optional=!0);var b=c.callChain=[],d=a._callChain;if(d&&0<d.length)for(var e=0;e<d.length;e++){var f=d[e],k=f.args,h=[];f={name:f.name,args:h};for(var g=0;g<k.length;g++)h.push(w(k[g]));b.push(f)}a._serialize&&(c=Object.assign({},c,a._serialize()))}else if(a.serialize&&
"function"===typeof a.serialize)c=Object.assign({},c,a.serialize());else if(Array.isArray(a))for(c.type="array",b=c.value=[],d=0;d<a.length;d++)b.push(w(a[d]));else if("object"===typeof a&&null!==a)for(c.type="object",b=Object.keys(a),d=c.value=[],e=0;e<b.length;e++)k=b[e],d.push({type:"field",name:k,value:w(a[k])});else c.value=a;return c},C=function(a){if("number"===typeof a)return a},x=function(a,c,b){var d=Math.min(a,c);if(b<=Math.max(a,c)&&b>=d)return b},D=function(a,c){if(c>=a)return c},E=function(a,
c){if(c<=a)return c},F=function(a){if("string"===typeof a)return a},z=function(a){for(var c=[],b=0;b<arguments.length;++b)c[b-0]=arguments[b];if(2>c.length||3<c.length)throw"Length validator requires between one and two arguments";b=c[c.length-1];if(2===c.length){if(b.length===c[0])return b}else{var d=Math.max(c[0],c[1]);if(b.length>=Math.min(c[0],c[1])&&b.length<=d)return b}},G=function(a){if("boolean"===typeof a)return a},H=function(a){if(null===a)return a};x=[{name:"shapeOf.number",callback:C},
{name:"shapeOf.number.range",callback:x,options:{parent:"shapeOf.number",requiredArgsCount:2}},{name:"shapeOf.number.min",callback:D,options:{parent:"shapeOf.number",aliases:"shapeOf.number.greaterThanOrEqualTo",requiredArgsCount:1}},{name:"shapeOf.number.max",callback:E,options:{parent:"shapeOf.number",aliases:"shapeOf.number.lessThanOrEqualTo",requiredArgsCount:1}},{name:"shapeOf.integer",callback:function(a){if(n(a))return a}},{name:"shapeOf.integer.range",callback:x,options:{parent:"shapeOf.integer",
requiredArgsCount:2}},{name:"shapeOf.integer.min",callback:D,options:{parent:"shapeOf.integer",aliases:"shapeOf.integer.greaterThanOrEqualTo",requiredArgsCount:1}},{name:"shapeOf.integer.max",callback:E,options:{parent:"shapeOf.integer",aliases:"shapeOf.integer.lessThanOrEqualTo",requiredArgsCount:1}},{name:"shapeOf.string",callback:F},{name:"shapeOf.string.size",callback:z,options:{parent:"shapeOf.string",aliases:"shapeOf.string.ofSize",requiredArgsCount:1}},{name:"shapeOf.string.pattern",callback:function(a){for(var c=
[],b=0;b<arguments.length;++b)c[b-0]=arguments[b];b="";if(2>c.length||3<c.length)throw"String pattern validator requires between one and two arguments";var d=c[0];if(2===c.length)var e=c[1];else b=c[1],e=c[2];if("string"===typeof d)d=new RegExp(d,b);else if(d instanceof RegExp)3===c.length&&(d=new RegExp(d,b));else throw"shapeOf.string.pattern() only accepts strings and RegExp objects as an argument";if(d.test(e))return e},options:{parent:"shapeOf.string",requiredArgsCount:1}},{name:"shapeOf.array",
callback:function(a){if(Array.isArray(a))return a}},{name:"shapeOf.array.size",callback:z,options:{parent:"shapeOf.array",aliases:"shapeOf.array.ofSize",requiredArgsCount:1}},{name:"shapeOf.bool",callback:G,options:{aliases:"shapeOf.boolean"}},{name:"shapeOf.object",callback:function(a){if("object"===typeof a&&null!==a)return a}},{name:"shapeOf.null",callback:H},{name:"shapeOf.primitive",callback:function(a){return F(a)||G(a)||C(a)||H(a)}},{name:"shapeOf.arrayOf",callback:function(a){for(var c=[],
b=0;b<arguments.length;++b)c[b-0]=arguments[b];if(2>c.length)throw"arrayOf validator requires at least one argument";b=c.pop();c=l(c);if(Array.isArray(b)){for(var d=b.length-1;0<=d;d--){var e=!1;for(var f=c.length-1;0<=f;f--){var k=shapeOf(b[d]).returnsObject.shouldBe(c[f]);if(e=e||"undefined"!==typeof k){k!==b[d]&&(b[d]=k);break}}if(!e)break}if(e)return b}}},{name:"shapeOf.arrayOf.size",callback:z,options:{parent:"shapeOf.arrayOf",aliases:"shapeOf.arrayOf.ofSize",requiredArgsCount:1}},{name:"shapeOf.objectOf",
callback:function(a){for(var c=[],b=0;b<arguments.length;++b)c[b-0]=arguments[b];if(2>c.length)throw"objectOf validator requires at least one argument";b=c.pop();c=l(c);if("object"===typeof b&&null!==b){for(var d=Object.keys(b),e=d.length-1;0<=e;e--){var f=b[d[e]];var k=!1;for(var h=c.length-1;0<=h;h--){var g=shapeOf(f).returnsObject.shouldBe(c[h]);if(k=k||"undefined"!==typeof g){g!==f&&(b[d[e]]=g);break}}if(!k)break}if(k)return b}}},{name:"shapeOf.oneOf",callback:function(a){for(var c=[],b=0;b<arguments.length;++b)c[b-
0]=arguments[b];if(2>c.length)throw"oneOf validator requires at least one argument";b=c.pop();c=l(c);for(var d=c.length-1;0<=d;d--)if(c[d]===b)return b},options:{requiredArgsCount:1}},{name:"shapeOf.oneOfType",callback:function(a){for(var c=[],b=0;b<arguments.length;++b)c[b-0]=arguments[b];if(2>c.length)throw"oneOfType validator requires at least one argument";b=c.pop();c=l(c);for(var d=c.length-1;0<=d;d--)if(shapeOf(b).shouldBe(c[d]))return b},options:{requiredArgsCount:1}}];shapeOf.optional={};
x.forEach(function(a){var c=shapeOf.Validator(a.name,a.callback,a.options),b=a.options||{},d=a.name.split("."),e=(b.parent||"").split("."),f=Object.assign({},a.options,{optional:!0}),k=d[0]+".optional."+d.filter(function(g,p){return 0<p}).join(".");f.parent&&(e=e[0]+".optional."+e.filter(function(g,p){return 0<p}).join("."),f.parent=e);var h=shapeOf.Validator(k,a.callback,f);"shapeOf"===d[0]&&2===d.length&&(shapeOf[d[1]]=c,shapeOf.optional[d[1]]=h);a=b.aliases||"";"string"===typeof a&&(a=[a]);a.forEach(function(g){g=
g.split(".");"shapeOf"===g[0]&&2===g.length&&(shapeOf[g[1]]=c,shapeOf.optional[g[1]]=h)})})})();shapeOf._versionCompatibilityHistory={"0.0.6":"0.0.6","0.0.5":"0.0.5"};shapeOf.version="0.0.6";shapeOf.compatibleSchemaVersion="0.0.6";module.exports=shapeOf;